const linkMap=document.querySelector(".link-map"),map=document.querySelector(".modal-map"),closeMap=map.querySelector(".button-close"),linkForm=document.querySelector(".link-form"),form=document.querySelector(".modal-form"),closeForm=form.querySelector(".button-close"),name=form.querySelector(".input-name"),email=form.querySelector(".input-email"),text=form.querySelector(".textarea");let isStorageSupport=!0,formName="",formEmail="";linkForm.addEventListener("click",function(e){e.preventDefault(),form.classList.remove("modal-error"),form.classList.toggle("modal-hidden"),form.classList.toggle("modal-show"),name.focus(),(formName||formEmail)&&(name.value=formName,email.value=formEmail,text.focus())}),form.addEventListener("submit",function(e){name.value&&email.value?(e.preventDefault(),isStorageSupport&&(localStorage.setItem("name",name.value),localStorage.setItem("email",email.value))):(e.preventDefault(),form.classList.remove("modal-error"),form.offsetWidth=form.offsetWidth,form.classList.add("modal-error"))});try{formName=localStorage.getItem("name"),formEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}closeForm.addEventListener("click",function(e){e.preventDefault(),form.classList.toggle("modal-show"),form.classList.toggle("modal-hidden")}),linkMap.addEventListener("click",function(e){e.preventDefault(),map.classList.toggle("modal-hidden"),map.classList.toggle("modal-show")}),closeMap.addEventListener("click",function(e){e.preventDefault(),map.classList.toggle("modal-show"),map.classList.toggle("modal-hidden")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(map.classList.contains("modal-show")&&(e.preventDefault(),map.classList.remove("modal-show"),map.classList.add("modal-hidden")),form.classList.contains("modal-show")&&(e.preventDefault(),form.classList.remove("modal-show"),form.classList.add("modal-hidden")))});
